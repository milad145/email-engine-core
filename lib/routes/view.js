/* clients.js */import path from 'path';import {URL} from "url";import express from "express"import {ObjectId} from "mongodb"import application from "../core/application.js";import {isLogin} from "../core/middleware.js"import {setResponseCode, setErrorResponse} from "../utils/utility.js";import passport from "passport";let router = express.Router();//*********************** POST ***********************////*********************** GET ***********************//router.get("/", (req, res) => {    res.render('index')});router.get("/login-azure", passport.authenticate('azuread-openidconnect'));router.get("/azure-callback", passport.authenticate('azuread-openidconnect', {failureRedirect: '/login'}),    (req, res) => {        res.redirect('/');    });router.get("/login-facebook", passport.authenticate("facebook"))router.get("/facebook-callback", passport.authenticate("facebook"), (req, res) => {    res.redirect("/")})router.get("/login-google", passport.authenticate("google"))router.get("/google-callback", passport.authenticate("google"), (req, res) => {    res.redirect("/")})router.get("/get-mails", isLogin, function (req, res) {    let {num} = req.params;    let {user} = req.session.passport;    application.getMails(user.accessToken)        .then(messages => res.json(messages))        .catch(err => {            // setErrorResponse(req, res, err)            res.json(err)        })})export default router;